# 얼리콜백(어리굴젓🦪)
**1. 얼리콜백이란❓**   

**2. 언제, 어떻게 사용하는거지❓**  

**3. 장단점** 

**4. 헷갈릴만한 개념**  

---
## 얼리콜백이란❓
**🔑 어떠한 사건이 발생하기 전에 함수를 호출하는 것**  

특정 조건이 만족을 하면 미리 정해놓은 함수가 작동을 하는 방식으로   
웹페이지가 로딩되기 전에 로딩창을 띄우는 것이 대표적이다.  

---

**그럼 이해를 도울 예시를 들어보자. 😁**  

많은 사람들이 좋아하는 스포츠인 축구를 예로 들어보려고 한다.  
축구는 전반 45분 후반 45분 총 90분의 경기시간이 정해져있다.  
근데 축구를 정규시간 90분+휴게시간 15분 이렇게 끝난 걸 본적이 없을 것 이다.  
그 이유는 어떠한 상황이 생길 때 경기를 중단하게 되기 때문이다.  
반칙 상황, 선수들의 고의적인 시간지연, 관객 난동 등 많은 이유가  
추가시간을 할당하는 요소가 된다.  

![alt text](image.png)  

이 때 반칙 상황이  얼리 콜백과 비슷한 개념이다.  

어떠한 주어진 규칙에서 벗어난 행동을 하였을 때 경기를 중단하는 과정이  
얼리콜백에서 특정 조건이 만족하면 중단 또는 다른 실행을 하는 것과 유사하다.  

---
## 언제, 어떻게 사용하는 거지❓
- 모델의 과적합 방지와 시간 단축을 해야할 때 사용된다.
- 웹 개발에서 웹 페이지 로딩이 완료되었을 때 특정 기능을 실행하거나,  
사용자가 버튼을 클릭했을 때 반응하도록 하기 위해 사용합니다.  
  
⭐ 다른 프로그래밍 언어에서도 각각의 용도에 맞게 사용된다고 합니다!  

**파이썬**에서는 얼리콜백 함수를 통해 얼리콜백을 구동시킬 수 있고  
tensorflow의 keras라는 라이브러리를 통해 학습 모델에 얼리 콜백을 사용할 수 있다고 합니다.
```
def oyster():
    print('경기를 중단합니다')

# 반칙 상황 발생
oyster()
```
- 위와 같이 어떠한 조건이 만족되면 함수를 호출하여 실행하는 것  

여기서 약간 의문점이 들 수 있어요. 일단 저는 들었습니다.  
바로 `조건문`과 `조건 반복문`이랑 뭐가 다른거야?  
이 부분은 뒤에 헷갈릴만한 개념에서 다시 얘기를 해보겠습니다.

```
from tensorflow.keras.callbacks import EarlyStopping

# 모델 컴파일
model.compile(...)

# 얼리 스토핑 설정
early_stop = EarlyStopping(monitor='val_loss', patience=5)

# 모델 학습
history = model.fit(x_train, y_train,
                    epochs=100,
                    validation_data=(x_val, y_val),
                    callbacks=[early_stop])
```
- EarlyStopping: 모델 학습 중 성능 향상이 멈추면 학습을 조기에 종료하는 기능입니다.  

- monitor='val_loss': 검증 데이터의 손실(loss)을 관찰하여 성능 변화를 판단합니다.  

- patience=5: 검증 손실이 5번 연속으로 감소하지 않으면 학습을 중단합니다.  

딥러닝부분에서는 정확하게 이해하지 못하였다. 😭  
(위에는 도와줘요 GPT쌤 시전...😂)   

다만 이해한 내용을 바탕으로 설명을 하자면  
에포크 수인 5 즉, 학습 모델이 전체 데이터를 얼마나 지났냐를 기준으로  
데이터 손실이 발생하지 않았다면 학습을 중단하는 기능을 하도록 하는 것이다.



**장고**에서는 얼리콜백과 유사한 방식으로 작동하는 신호를 통해 사용한다고 합니다.  

**신호**  
- 장고에서 어떠한 이벤트가 발생 시 자동으로 실행되는 함수  
해당 부분을 들었을 때 얼리콜백과 비슷한 형식으로 구동이 되는구나라는 것을 알 수 있다.  

예를 들어서 모델 인스턴스가 저장되거나 생성될 때 신호를 보내서  
어떠한 작업을 실행시킬 수 있도록 하는 것이다.

위 부분도 개념만 이해한 부분이라 추가적인 공부가 필요해 보인다. 😭  

---

## ⭐ 장단점
제일 큰 장점으로는 `비동기 처리` 라고 볼 수 있다.  

**비동기 처리란?**  
컴퓨터가 여러 일을 동시에 진행한다는 것이다.   
어떠한 작업을 할 때 다른 것도 같이 실행되는 멀티태스킹 느낌

뭔말이야...?  
처음 들어보면 이해가 안될 수 있습니니다. 아니 아깐 함수 호출한다면서  
그럼 함수가 호출되면 호출된 거 부터 처리하는거 아니야?  
이런 생각이 들 수 있을 것이고 저도 그랬습니다.  

얼리콜백은 호출된 함수가 코드 흐름과 벗어나서 실행이 된다고 합니다.  
즉 비빔면을 끓이면서 옆에서는 삼겹살 굽고 하는 식으로 가능하다는 것입니다.  

근데 그럼 한번에 여러 일을 하니깐 좋은거 아니야?

여기서 문제점이 발생합니다.  
이를 `콜백 지옥` 이라고 하는데 어떤 느낌이냐면  
룰루랄라 오늘은 치팅데이~ 하고 삼겹살 비빔면 만드는데 옆에서 나는 불닭~ 나는 짜파게티~  
콜백이 계속해서 중첩이 되는거죠. 점점 코드가 복잡해지고 성능이 저하되는 문제가 발생합니다.  
 
크게 이러한 장단점이 발생하면서 위에 장단점으로 부터 파생되는 장단점이 발생한다.  

추가적으로 장점은  
모듈화: 재사용성을 높이고 코드의 가독성을 향상
유연성: 이벤트에 대해 함수를 연결하여 복잡한 시스템을 구축

추가적인 단점은  
에러 처리: 콜백 함수 내에서 발생한 에러를 처리하기 어려움  
테스트 어려움: 비동기 코드의 특성상 테스트하기가 힘듬

---
## 📃 헷갈릴만한 개념
여기서는 조건문 조건 반복문과 다른 개념이 뭔지를 설명하려고 한다.  

이것도 예시를 통해 쉽게 이해해보도록 하자.  

**조건문**  
이번주 금요일날 치팅데이니깐 금요일이면 맛있는거 먹어

**조건 반복문**  
삼겹살 구울 때 1분마다 뒤집어야 맛있으니까 그렇게 구워  
그리고 그렇게 4번 반복하면 종료  

**얼리 콜백**  
비빔면 3분 타이머 맞춰놓고 그거 울리면 불꺼  

조건문은 한번만 실행하고 조건이 꺼지고  
조건 반복문은 조건이 참일 때 계속 반복이고  
얼리 콜백은 어떠한 이벤트 발생 시 실행  

타이머가 울리는 이벤트가 있을 때 불을 끄는 행동을 실행하는 것  
이것이 위 두개와의 차이점이다. 이벤트라는 것을 잘 생각해두면 좋다.  

---

**추가 공부**
얼리콜백은 비동기처리라는 특성을 지니지만 모든 얼리콜백이 비동기처리를 하는 것은 아니다.
예시를 들어 이해했지만 오히려 헷갈릴 수 있어서 시스템적인 개념으로 접근하는 것이 더 좋을 수도 있음
